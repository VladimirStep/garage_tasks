var task_row = $('#projects-list div[data-project-id=<%= @project.id %>] .tasks-list div[data-task-id=<%= @task.id %>]');

task_row.html('<%= escape_javascript(render partial: 'form', locals: { task: @task }) %>');

var task_form = $('form.edit_task', task_row);

task_form.focusout(function(){
    $(this).closest('form').submit();
});

task_form.validate({
    submitHandler: function(form){
        $(form).trigger('submit.rails');
    }
});

$(function () {
    $('#datetimepicker').datetimepicker({
        format: 'YYYY-MM-DD hh:mm',
        sideBySide: true,
        useCurrent: false,
        showClear: true,
        showClose: true
    });
});